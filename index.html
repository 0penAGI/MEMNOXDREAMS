<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>Undertale: Сны Архитектора</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

```
    body {
        font-family: 'Courier New', monospace;
        background: #000;
        color: #fff;
        min-height: 100vh;
        overflow-x: hidden;
        overflow-y: auto;
        position: relative;
        touch-action: pan-y;
        -webkit-overflow-scrolling: touch;
    }

    .dream-noise {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.04;
        pointer-events: none;
        z-index: 1;
        background-image: url('data:image/svg+xml,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)"/%3E%3C/svg%3E');
        will-change: transform;
    }

    .undertale-veil {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.02) 0%, transparent 70%);
        pointer-events: none;
        z-index: 1;
    }

    .container {
        position: relative;
        z-index: 2;
        max-width: 100%;
        margin: 0 auto;
        padding: 20px 15px 100px;
        text-align: center;
    }

    .heart-eye {
        width: 50px;
        height: 50px;
        margin: 10px auto 20px;
        position: relative;
        animation: heart-beat 2s ease-in-out infinite;
    }

    .heart-eye .eye-outer {
        width: 32px;
        height: 16px;
        border: 2px solid #fff;
        border-radius: 50%;
        position: absolute;
        top: 8px;
        left: 9px;
        overflow: hidden;
    }

    .heart-eye .eye-inner {
        width: 10px;
        height: 10px;
        background: radial-gradient(circle, #fff, #666);
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: eyeMove 4s ease-in-out infinite;
    }

    @keyframes eyeMove {
        0%, 100% { left: 50%; }
        25% { left: 35%; }
        50% { left: 65%; }
        75% { left: 45%; }
    }

    .heart {
        width: 0;
        height: 0;
        border-left: 25px solid transparent;
        border-right: 25px solid transparent;
        border-bottom: 35px solid #fff;
        position: absolute;
        top: 8px;
        left: 12px;
        transform: rotate(-45deg);
    }

    .heart::before,
    .heart::after {
        content: '';
        width: 0;
        height: 0;
        position: absolute;
    }

    .heart::before {
        border-left: 17px solid transparent;
        border-right: 17px solid transparent;
        border-top: 17px solid #fff;
        top: -17px;
        left: -17px;
    }

    .heart::after {
        border-left: 17px solid transparent;
        border-right: 17px solid transparent;
        border-top: 17px solid #fff;
        top: -17px;
        right: -17px;
    }

    @keyframes heart-beat {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.15); }
    }

    h1 {
        font-size: clamp(1.3rem, 6vw, 2.5rem);
        font-weight: bold;
        letter-spacing: 2px;
        margin-bottom: 15px;
        text-transform: uppercase;
        line-height: 1.2;
        word-break: break-word;
    }

    .countdown {
        font-size: clamp(1.2rem, 5vw, 1.8rem);
        margin: 15px 0;
        color: #fff;
        text-shadow: 0 0 10px rgba(255,255,255,0.6);
        font-weight: bold;
    }

    .dialogue-box {
        background: rgba(0,0,0,0.9);
        border: 2px solid #fff;
        padding: 15px;
        margin: 20px 0;
        position: relative;
        min-height: 100px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: clamp(0.85rem, 3.5vw, 1rem);
        line-height: 1.4;
    }

    .dream-input {
        width: 100%;
        min-height: 70px;
        max-height: 150px;
        background: rgba(255,255,255,0.05);
        border: 1px solid #fff;
        color: #fff;
        padding: 10px;
        font-family: 'Courier New', monospace;
        font-size: clamp(0.85rem, 3.5vw, 1rem);
        resize: vertical;
        margin-bottom: 10px;
        touch-action: manipulation;
    }

    .dream-input::placeholder {
        color: rgba(255,255,255,0.5);
    }

    .dream-input:focus {
        outline: none;
        box-shadow: 0 0 8px rgba(255,255,255,0.4);
    }

    .choice-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 20px 0;
        padding: 0 5px;
    }

    .choice {
        padding: 15px 10px;
        border: 2px solid #fff;
        cursor: pointer;
        transition: all 0.2s;
        user-select: none;
        font-size: clamp(0.8rem, 3.5vw, 0.95rem);
        text-align: center;
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0,0,0,0.5);
        touch-action: manipulation;
    }

    .choice:active {
        background: #fff;
        color: #000;
        transform: scale(0.95);
    }

    @media (hover: hover) {
        .choice:hover {
            background: #fff;
            color: #000;
        }
    }

    .result-area {
        margin-top: 15px;
        min-height: 100px;
        background: rgba(255,255,255,0.05);
        border: 1px solid #fff;
        padding: 12px;
        text-align: left;
        font-size: clamp(0.75rem, 3vw, 0.9rem);
        line-height: 1.4;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.6s ease;
        word-break: break-word;
    }

    .result-area.active {
        opacity: 1;
        transform: translateY(0);
    }

    .execution-step {
        margin: 6px 0;
        padding: 4px;
        border-left: 2px solid #fff;
        position: relative;
        font-size: clamp(0.7rem, 2.8vw, 0.85rem);
    }

    .execution-step::before {
        content: '▸';
        color: #ff0055;
        margin-right: 4px;
        font-weight: bold;
    }

    .system-status {
        text-align: center;
        margin-top: 10px;
        font-size: clamp(0.65rem, 2.5vw, 0.75rem);
        color: rgba(255,255,255,0.6);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .system-status.processing {
        color: #ff0055;
        animation: statusPulse 0.5s ease-in-out infinite;
    }

    @keyframes statusPulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    .quantum-viz {
        display: flex;
        justify-content: space-around;
        margin: 20px auto;
        max-width: 200px;
        height: 35px;
        position: relative;
    }

    .quantum-indicator {
        width: 6px;
        height: 6px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 4px rgba(255,255,255,0.8);
        position: relative;
        animation: quantumFloat 2s ease-in-out infinite;
    }

    .quantum-indicator:nth-child(1) { animation-delay: 0s; }
    .quantum-indicator:nth-child(2) { animation-delay: 0.2s; }
    .quantum-indicator:nth-child(3) { animation-delay: 0.4s; }
    .quantum-indicator:nth-child(4) { animation-delay: 0.6s; }
    .quantum-indicator:nth-child(5) { animation-delay: 0.8s; }

    @keyframes quantumFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }

    .quantum-indicator.entangled-up {
        animation: quantumEntangledUp 1.5s ease-in-out infinite;
    }

    .quantum-indicator.entangled-down {
        animation: quantumEntangledDown 1.5s ease-in-out infinite;
    }

    @keyframes quantumEntangledUp {
        0%, 100% { transform: translateY(0); background: #fff; }
        50% { transform: translateY(-25px); background: #ff0055; }
    }

    @keyframes quantumEntangledDown {
        0%, 100% { transform: translateY(0); background: #fff; }
        50% { transform: translateY(25px); background: #00ffff; }
    }

    @media (max-width: 360px) {
        .container {
            padding: 15px 10px 80px;
        }
        
        .choice-container {
            gap: 8px;
        }
        
        .choice {
            padding: 12px 8px;
            min-height: 45px;
        }
    }

    /* iOS safe area */
    @supports (padding-bottom: env(safe-area-inset-bottom)) {
        .container {
            padding-bottom: calc(100px + env(safe-area-inset-bottom));
        }
    }
</style>
```

</head>
<body>
    <div class="dream-noise"></div>
    <div class="undertale-veil"></div>

```
<div class="container">
    <div class="heart-eye">
        <div class="eye-outer">
            <div class="eye-inner"></div>
        </div>
        <div class="heart"></div>
    </div>

    <h1>undertale:<br>сны архитектора</h1>

    <div class="countdown" id="countdown">00:00:00</div>

    <div class="dialogue-box" id="dialogue">
        <textarea class="dream-input" id="dreamInput" placeholder="* опиши сон... determination ждёт"></textarea>
        <div class="result-area" id="output">
            <div id="outputText">
                * система падает в underground...<br>
                * quantum entanglement: active.<br>
                * execution module: online.
            </div>
            <div id="executionPlan"></div>
        </div>
        <div class="system-status" id="status">* ready for resonance</div>
    </div>

    <div class="choice-container">
        <div class="choice" onclick="fight()">* fight</div>
        <div class="choice" onclick="act()">* act</div>
        <div class="choice" onclick="item()">* item</div>
        <div class="choice" onclick="mercy()">* mercy</div>
    </div>

    <div class="quantum-viz" id="quantumViz">
        <div class="quantum-indicator"></div>
        <div class="quantum-indicator"></div>
        <div class="quantum-indicator"></div>
        <div class="quantum-indicator"></div>
        <div class="quantum-indicator"></div>
    </div>
</div>

<script>
    const structureArchitectures = [
        "* castle of crystallized time",
        "* tower of frozen probabilities",
        "* temple of uncertainty",
        "* monument to quantum foam",
        "* pyramid of folded dimensions"
    ];

    const flowArchitectures = [
        "* architecture without walls — only perception borders",
        "* space flowing through realities",
        "* house-stream, shifting with each glance",
        "* city-river of time",
        "* structure of eternal becoming"
    ];

    const lightArchitectures = [
        "* building existing only in the moment of observation",
        "* house of refracted consciousness light",
        "* city visible only to the eye",
        "* architecture of perception",
        "* space between gazes"
    ];

    const executionSteps = [
        "* step 1: visualize foundation — sketch daily, 5 min",
        "* step 2: gather resources — find allies, prototype",
        "* step 3: test probability — experiment, observe",
        "* step 4: launch flow — share vision, evolve",
        "* step 5: materialize — build, ignore linear time"
    ];

    let countdownTime = Math.floor(Math.random() * 10000) + 3600;

    function updateCountdown() {
        countdownTime--;
        if (countdownTime < 0) countdownTime = Math.floor(Math.random() * 10000) + 3600;
        const hours = Math.floor(countdownTime / 3600);
        const minutes = Math.floor((countdownTime % 3600) / 60);
        const seconds = countdownTime % 60;
        document.getElementById('countdown').textContent = 
            `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    setInterval(updateCountdown, 1000);

    function triggerEntanglement() {
        const indicators = document.querySelectorAll('.quantum-indicator');
        const idx1 = Math.floor(Math.random() * indicators.length);
        let idx2 = Math.floor(Math.random() * indicators.length);
        while (idx2 === idx1) idx2 = Math.floor(Math.random() * indicators.length);
        indicators[idx1].classList.add('entangled-up');
        indicators[idx2].classList.add('entangled-down');
        setTimeout(() => {
            indicators[idx1].classList.remove('entangled-up');
            indicators[idx2].classList.remove('entangled-down');
        }, 3000);
    }

    setInterval(() => {
        if (Math.random() > 0.7) triggerEntanglement();
    }, 5000);

    function selectResonantArchitecture(dream) {
        const dreamLower = dream.toLowerCase();
        if (dreamLower.includes('свет') || dreamLower.includes('глаз') || dreamLower.includes('видеть') || dreamLower.includes('light') || dreamLower.includes('eye')) {
            return lightArchitectures[Math.floor(Math.random() * lightArchitectures.length)];
        }
        if (dream.length % 2 === 0) {
            return structureArchitectures[Math.floor(Math.random() * structureArchitectures.length)];
        } else {
            return flowArchitectures[Math.floor(Math.random() * flowArchitectures.length)];
        }
    }

    function generateExecutionPlan() {
        const steps = executionSteps.slice(0, 3 + Math.floor(Math.random() * 3));
        return steps.map(step => `<div class="execution-step">${step}</div>`).join('');
    }

    function processDream() {
        const dream = document.getElementById('dreamInput').value;
        const output = document.getElementById('output');
        const outputText = document.getElementById('outputText');
        const executionPlan = document.getElementById('executionPlan');
        const status = document.getElementById('status');
        
        if (!dream.trim()) {
            outputText.innerHTML = "* error: void can't be spared.<br>* input required, fallen one.";
            executionPlan.innerHTML = '';
            output.classList.add('active');
            return;
        }

        triggerEntanglement();
        output.classList.add('active');
        status.classList.add('processing');
        status.textContent = "* processing quantum state...";
        outputText.innerHTML = "* ████████░░░░ 80%<br>* analyzing timeline...";

        setTimeout(() => {
            const resonantArch = selectResonantArchitecture(dream);
            const entropy = (Math.random() * 100).toFixed(2);
            const coherence = (Math.random() * 100).toFixed(2);
            const dreamHash = dream.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            const resonanceFreq = (dreamHash % 1000) + 100;
            
            outputText.innerHTML = `
                <strong>* ARCHITECTURAL RESOLUTION:</strong><br><br>
                ${resonantArch}<br><br>
                <small>
                * entropy: ${entropy}%<br>
                * coherence: ${coherence}%<br>
                * timeline shift: ${(Math.random() * 10 - 5).toFixed(3)}μs<br>
                * resonance: ${resonanceFreq} Hz<br>
                * hash: 0x${dreamHash.toString(16).toUpperCase()}
                </small>
            `;
            
            executionPlan.innerHTML = `<strong>* EXECUTION PATH:</strong><br>${generateExecutionPlan()}`;
            
            status.classList.remove('processing');
            status.textContent = "* resonance spared | dream materializes";
        }, 2000);
    }

    function fight() {
        const outputText = document.getElementById('outputText');
        const output = document.getElementById('output');
        outputText.innerHTML = '* strike — echo in void.<br>* no enemy here.<br>* just your shadow, architect.';
        output.classList.add('active');
        triggerEntanglement();
    }

    function act() {
        processDream();
    }

    function item() {
        const outputText = document.getElementById('outputText');
        const output = document.getElementById('output');
        outputText.innerHTML = '* item: the eye-heart.<br>* it pulses in your soul.<br>* nonlinear, alive.<br>* quantum viz activates.';
        output.classList.add('active');
        triggerEntanglement();
    }

    function mercy() {
        const dream = document.getElementById('dreamInput').value;
        const executionPlan = document.getElementById('executionPlan');
        const status = document.getElementById('status');
        const output = document.getElementById('output');
        
        if (dream.trim()) {
            executionPlan.innerHTML = `<strong>* MERCY PATH UNLOCKED:</strong><br>${generateExecutionPlan()}`;
            status.textContent = "* mercy granted | steps to surface";
            output.classList.add('active');
        } else {
            const outputText = document.getElementById('outputText');
            outputText.innerHTML = '* mercy: release.<br>* sans grins in corner.<br>* no dream to spare yet.<br>* underground shifts.';
            output.classList.add('active');
        }
        triggerEntanglement();
    }

    let entanglementTimeout;
    document.getElementById('dreamInput').addEventListener('input', function(e) {
        if (e.target.value.length % 10 === 0 && e.target.value.length > 0) {
            clearTimeout(entanglementTimeout);
            entanglementTimeout = setTimeout(() => triggerEntanglement(), 100);
        }
    });

    // Prevent zoom on double tap for iOS
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event) {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
</script>
```

</body>
</html>